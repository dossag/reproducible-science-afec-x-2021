---
title: "Reproducible science: Module4"
subtitle: "Exercice2 Data manipulation - solutions"
author: "[Gbadamassi G.O. Dossa](https://scholar.google.com/citations?user=w20AkZcAAAAJ&hl=en)"
institute: "Xishuangbanna Tropical Botanical Garden, XTBG-CAS"
date: "2021/09/28 (updated: `r Sys.Date()`)"
output:
  xaringan::moon_reader:
    lib_dir: libs
    #chakra: libs/remark-latest.min.js Able this if you want to make slide to work offline
    #seal: false ## To set off the first slide renders by xaringan
    nature:
      #ratio: '16:9'
      highlightStyle: github
      highlightLines: true
      countIncrementalSlides: false
      #countdown: 60000
      #autoplay: 30000
      ## for highlighting use the following * at the beginning, or are wrapped in {{ }}, or at the end #<<
      ## highlight.output = c(1, 3) means highlighting the first and third line.
      # xaringan::summon_remark() to make slide work offline
 ## https://bookdown.org/yihui/rmarkdown/xaringan-preview.html for more information        
 ## Three dashes (---) for seperating slide
 ## two dash (--) to introduce next line on a slide
 ## One dash (-) for bullet point
 ## .footnote[ AND PUT WHAT YOU WANT IN HERE]
 ## <sup>A</sup> for putting A in upperscript. This html language
 ## ![tidyverse logo](tidyverse.png)
 ##---

##background-image: url(https://github.com/rstudio/hex-stickers/raw/master/SVG/tidyverse.svg?sanitize=true)
##background-size: 550px
##background-position: 50% 50%
##---
## Check for how to keep special characters like chinese, french e accent aigue etc...
---

```{r setup, include=FALSE, echo=FALSE}
#options(htmltools.dir.version = FALSE)
#knitr::opts_chunk$set(comment = "", warning = FALSE, message = FALSE)
knitr::opts_chunk$set(warning = FALSE, message = FALSE)
library(palmerpenguins)
library(tidyverse)
```

## Question 1a 

.tiny-font[
```{r}
penguins # display data
```
]

---

## Question 1a 

.tiny-font[
```{r}
penguins %>% glimpse() # display data
```
]

---

## Question 1b

```{r}
dat <- penguins %>%
# filter out missing sex
  filter(!is.na(sex)) %>% 
# select variables
  select(species, island, bill_length_mm, body_mass_g) 
```

---

## Question 2a

.tiny-font[
```{r}
dat # nb of penguins
```
]

---

## Questions 2b and 2d

```{r}
# nb of species, and penguins per species
dat %>% count(species) 
```

---

## Questions 2b and 2d

```{r}
dat %>% count(species, sort = TRUE) # idem, arranged by n
```


---

## Question 2c

```{r}
dat %>% count(island) # nb of island, and penguins per island
```


---

## Question 2e

```{r}
# penguins per species and island
dat %>% count(species, island) 
```



---

## Question 3a: mean body mass

.tiny-font[
```{r}
# option 1
dat %>%
  mutate(mean_bm = mean(body_mass_g))
```
]

---

## Question 3a: mean body mass

```{r}
# option 2
dat %>%
  summarise(mean_bm = mean(body_mass_g))
```


---

## Question 3b: mean body mass per species

.tiny-font[
```{r}
# option 1
dat %>%
  group_by(species) %>% 
  mutate(mean_bm = mean(body_mass_g))
```
]



---

## Question 3b: mean body mass per species

```{r}
# option 2
dat %>% 
  group_by(species) %>% 
  summarize(mean_bm = mean(body_mass_g))
```


---

## Question 3c: mean traits

```{r}
# all at once, through column selection
dat %>% 
  group_by(species) %>% 
  summarize(across(bill_length_mm:body_mass_g, mean))
```



---

## Question 3c: mean traits

```{r}
# all at once, through column format selection
dat %>% 
  group_by(species) %>% 
  summarize(across(where(is.numeric), mean))
```
